# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º - –†–µ–∑—é–º–µ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –æ–Ω –∑–∞–ø—É—Å–∫–∞–ª—Å—è –∏ —Å—Ä–∞–∑—É –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è:

```
frontend-1  | /docker-entrypoint.sh: Configuration complete; ready for start up
Gracefully stopping... (press Ctrl+C again to force)
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è nginx** –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Nuxt.js —Å–µ—Ä–≤–µ—Ä–∞
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤** - nginx —Å–ª—É—à–∞–ª –Ω–∞ –ø–æ—Ä—Ç—É 80, –∞ docker-compose –æ–∂–∏–¥–∞–ª –ø–æ—Ä—Ç 3000
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ backend API
4. **–û—à–∏–±–∫–∞ –≤ tRPC –∫–ª–∏–µ–Ω—Ç–µ** - "[nuxt] instance unavailable" –∏–∑-–∑–∞ –≤—ã–∑–æ–≤–∞ composables –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω Dockerfile

**–ë—ã–ª–æ:** nginx + —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã  
**–°—Ç–∞–ª–æ:** Node.js + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Nuxt.js (Nitro) —Å–µ—Ä–≤–µ—Ä

### 2. –û–±–Ω–æ–≤–ª–µ–Ω nuxt.config.ts

–î–æ–±–∞–≤–ª–µ–Ω `routeRules` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è API –≤ production —Ä–µ–∂–∏–º–µ

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í docker-compose.yml –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è frontend –∏ backend

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (—É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–æ):

- ‚úÖ `applications/web-app/Dockerfile`
- ‚úÖ `applications/web-app/nuxt.config.ts`
- ‚úÖ `applications/web-app/app/lib/trpc.ts`

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å):

- ‚ö†Ô∏è `~/projects/studsovet/docker-compose.yml`

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏:

1. **QUICK_DEPLOY_GUIDE.md** ‚≠ê - **–ù–ê–ß–ù–ò–¢–ï –° –≠–¢–û–ì–û!**

   - –ö—Ä–∞—Ç–∫–æ–µ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

2. **DOCKER_COMPOSE_EXAMPLE.md**

   - –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ docker-compose.yml
   - –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å

3. **SERVER_DEPLOYMENT_CONFIG.md**

   - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - Troubleshooting

4. **ENVIRONMENT_SETUP.md**

   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

5. **FIX_INSTANCE_UNAVAILABLE.md**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "[nuxt] instance unavailable"
   - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç lazy initialization

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "fix: use Nuxt built-in server instead of nginx"
git push origin master

# 2. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–±–æ—Ä–∫–∏ –≤ CI/CD
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å docker-compose.yml
nano ~/projects/studsovet/docker-compose.yml
# –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. DOCKER_COMPOSE_EXAMPLE.md)

# 2. –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–∑—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
cd ~/projects/studsovet
docker compose down frontend backend
docker pull registry.gitlab.kosygin-rsu.ru/studsovet/studform-trpc-vue/frontend:master
docker pull registry.gitlab.kosygin-rsu.ru/studsovet/studform-trpc-vue/backend:master
docker compose up -d frontend backend

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f frontend backend
```

## üåê –í–∞—à–∏ –¥–æ–º–µ–Ω—ã

- **Frontend:** https://webapp.studsovet.kosygin-rsu.ru
- **Backend API:** https://api.webapp.studsovet.kosygin-rsu.ru

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://webapp.studsovet.kosygin-rsu.ru –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ CORS

## üìû –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs -f frontend backend`
2. –°–º–æ—Ç—Ä–∏—Ç–µ **SERVER_DEPLOYMENT_CONFIG.md** —Ä–∞–∑–¥–µ–ª "–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è"
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   ```bash
   docker exec -it studsovet-frontend-1 env | grep -E "BACKEND|HOST|PORT"
   docker exec -it studsovet-backend-1 env | grep FRONTEND
   ```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **ENV_URLS_GUIDE.md** - –æ–±—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ URL –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **applications/web-app/DOCKERFILE_README.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Dockerfile

---

**–í–∞–∂–Ω–æ:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ —É–∂–µ —Å–¥–µ–ª–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:

1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å
2. –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

–£–¥–∞—á–∏! üéâ
